<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->
    <title>PARCIAL2</title>

    <!-- Icons font CSS-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    <link href="../form/vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="../form/vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="../form/vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="../form/vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="../form/css/main.css" rel="stylesheet" media="all">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

    <script src="../form/js/jquery-3.2.1.min.js"></script>
    <script>
        var id, cantidad = 0;
        //Indica las opciones para llamar al GPS.
        var opcionesGPS = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
        }

        function getlocation(){

            //Obteniendo la referencia directa.
            navigator.geolocation.getCurrentPosition(function(geodata){
                var coordenadas = geodata.coords;

                var element = document.getElementById("longitud");
                element.value = coordenadas.longitude;
                element = document.getElementById("latitud");
                element.value = coordenadas.latitude;

                $("#posicionGps").text("Latitud: "+coordenadas.latitude+", Longitud: "+coordenadas.longitude+", Precisión: "+coordenadas.accuracy+" metros");
            }, function(){
                $("#posicionGps").text("No permite el acceso del API GEO");
            }, opcionesGPS);

        };
    </script>

    <script>

        function  formCRUD(){
            var localStorageKeyName = 'forms';

            cargarLocalStorage();

            $("#submit").click(function () {
                var longitud = document.getElementById("longitud"),
                    latitud = document.getElementById("latitud"),
                    nombre = document.getElementById("first_name"),
                    apellido = document.getElementById("last_name"),
                    provincia = document.getElementById("subject"),
                    nivelAcad = document.getElementById("nivelacad"),
                    usuario = localStorage.getItem("loggedUser");

                // Validate
                //if (name.value.length === 0 || job.value.length === 0 || !parseInt(age.value)) return;

                var formulario = {
                    longitud: longitud.value,
                    latitud: latitud.value,
                    nombre: nombre.value,
                    apellido: apellido.value,
                    provincia: provincia.value,
                    nivelacad: nivelAcad.value,
                    usuario: usuario
                };

                // Clean data
                nombre.value = '';
                apellido.value = '';

                // Append to my localStorage
                agregarLocalStorage(formulario);
            })

            function agregarLocalStorage(obj) {
                var forms = [],
                    dataInLocalStorage = localStorage.getItem(localStorageKeyName);

                if (dataInLocalStorage !== null) {
                    forms = JSON.parse(dataInLocalStorage);
                }

                forms.push(obj);

                localStorage.setItem(localStorageKeyName, JSON.stringify(forms));

                cargarLocalStorage();
            }

            function cargarLocalStorage() {
                var forms = [],
                    dataInLocalStorage = localStorage.getItem(localStorageKeyName),
                    gridBody = document.querySelector("#grid tbody");

                if (dataInLocalStorage !== null) {
                    forms = JSON.parse(dataInLocalStorage);
                }

                // Draw TR from TBODY
                gridBody.innerHTML = '';

                forms.forEach(function (x, i) {
                    var tr = document.createElement("tr"),
                        tdNombre = document.createElement("td"),
                        tdApellido = document.createElement("td"),
                        tdProvincia = document.createElement("td"),
                        tdNivel = document.createElement("td"),
                        tdRemove = document.createElement("td"),
                        btnRemove = document.createElement("button");

                    tdNombre.innerHTML = x.nombre;
                    tdApellido.innerHTML = x.apellido;
                    tdProvincia.innerHTML = x.provincia;
                    tdNivel.innerHTML = x.nivelacad;


                    btnRemove.textContent = 'Remover';
                    btnRemove.className = 'btn btn-xs btn-danger';
                    btnRemove.addEventListener('click', function(){
                        removerLocalStorage(i);
                    });

                    tdRemove.appendChild(btnRemove);

                    tr.appendChild(tdNombre);
                    tr.appendChild(tdApellido);
                    tr.appendChild(tdProvincia);
                    tr.appendChild(tdNivel);
                    tr.appendChild(tdRemove);

                    gridBody.appendChild(tr);
                });
            }

            function removerLocalStorage(index){
                var forms = [],
                    dataInLocalStorage = localStorage.getItem(localStorageKeyName);

                forms = JSON.parse(dataInLocalStorage);

                forms.splice(index, 1);

                localStorage.setItem(localStorageKeyName, JSON.stringify(forms));

                cargarLocalStorage();
            }
        }

    </script>

    <script>

        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }

        function init() {

            if(navigator.onLine == true){
                localStorage.setItem("loggedUser",readCookie("loggedUser"));
            }
            getlocation();
            formCRUD();

            $("#actualizarG").click(function(){
                getlocation();
            });

        };

    </script>

</head>

<body onload="init()">
    <div class="page-wrapper bg-gra-03 p-t-45 p-b-50">
        <div class="wrapper wrapper--w790">
            <div class="card card-5">
                <div class="card-heading">
                    <h2 class="title">Encuesta de nivel educativo</h2>

                </div>
                <div class="card-body">
                   <!-- <form method="post" action=""> -->
                        <div class="form-row m-b-55">
                            <div class="name">Ubicacion</div>
                            <div class="value">
                                <div class="row row-space">
                                    <div class="col-2">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="longitud" id="longitud" readonly>
                                            <label class="label--desc">Longitud</label>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="latitud" id="latitud" readonly >
                                            <label class="label--desc">Latitud</label>
                                        </div>
                                    </div>
                                    <div class="btn-div">
                                        <button class="btn btn--radius-2 btn--red" id="actualizarG">Actualizar</button>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="form-row m-b-55">
                            <div class="name">Nombre del encuestado</div>
                            <div class="value">
                                <div class="row row-space">
                                    <div class="col-2">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="first_name" id="first_name">
                                            <label class="label--desc">Nombre</label>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="input-group-desc">
                                            <input class="input--style-5" type="text" name="last_name" id="last_name">
                                            <label class="label--desc">Apellido</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                       <!-- lista de productos, en el select -->
                        <div class="form-row">
                            <div class="name">Provincia</div>
                            <div class="value">
                                <div class="input-group">
                                    <div class="rs-select2 js-select-simple select--no-search">
                                        <select name="subject" id="subject">
                                            <option disabled="disabled" selected="selected">Elegir</option>
                                            <option>Duarte</option>
                                            <option>Dajabón</option>
                                            <option>Espaillat</option>
                                            <option>La Vega</option>
                                            <option>María Trinidad Sánchez </option>
                                            <option>Monseñor Nouel </option>
                                            <option>Montecristi </option>
                                            <option>Puerto Plata </option>
                                            <option>Salcedo </option>
                                            <option>Samaná </option>
                                            <option>Sánchez Ramírez </option>
                                            <option>Santiago de los Caballeros </option>
                                            <option>Santiago Rodríguez </option>
                                            <option>Valverde</option>
                                        </select>
                                        <div class="select-dropdown"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--  Radio buttons -->

                        <!-- lista de productos, en el select -->
                        <div class="form-row">
                            <div class="name">Nivel academico</div>
                            <div class="value">
                                <div class="input-group">
                                    <div class="rs-select2 js-select-simple select--no-search">
                                        <select name="nivelacad" id="nivelacad">
                                            <option disabled="disabled" selected="selected">Elegir</option>
                                            <option>Basico</option>
                                            <option>Medio</option>
                                            <option>Grado Universitaro</option>
                                            <option>Postgrado</option>
                                            <option>Doctorado</option>

                                        </select>
                                        <div class="select-dropdown"></div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="btn-div">
                            <button class="btn btn--radius-2 btn--red" id="submit">Enviar</button>
                        </div>
                   <!-- --> </form>
                </div>
            </div>
            <br>
            <div class="card card-5">
                <div class="card-heading">
                    <a><h2 class="title">Formularios guardados</h2></a>
                </div>
                <div class="card-body">

                    <table id="grid" class="table table-striped">

                        <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Provincia</th>
                            <th>Nivel Acad.</th>
                            <th style="width:80px;">
                            </th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>


                </div>
            </div>
        </div>
    </div>

    <!-- Jquery JS-->
    <script src="../form/vendor/jquery/jquery.min.js"></script>
    <!-- Vendor JS-->
    <script src="../form/vendor/select2/select2.min.js"></script>
    <script src="../form/vendor/datepicker/moment.min.js"></script>
    <script src="../form/vendor/datepicker/daterangepicker.js"></script>

    <!-- Main JS-->
    <script src="../form/js/global.js"></script>

</body><!-- This templates was made by Colorlib (https://colorlib.com) -->

</html>
<!-- end document-->